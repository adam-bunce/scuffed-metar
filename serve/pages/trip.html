<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRIP | Scuffed Metar</title>
    <link rel="icon" type="image/x-icon" href="../static/favicon.svg">
    <link rel="stylesheet" href="../static/styles.css?v={{- .options.Version -}}">
    <script type="text/javascript" src="../static/script.js?v={{- .options.Version -}}" defer></script>
    <script data-goatcounter="https://scuffed-metar.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>

<body>
<!-- Header -->
<section id="header" class="header">
    <div class="header-container">
        <h2 class="sm mono" id="top">Scuffed METAR</h2>
        <div class="version-dark-container">
            <div id="darkmode-toggle" class="mono dark">MODE</div>
            <div>&nbsp;</div>
            <a href="/info" class="mono version" style="font-family: GeistMono, Courier, serif;">v{{- .options.Version -}}</a>
        </div>

        <div class="reload-info text-grey">Data is refreshed per-request, reload page to see changes.</div>
    </div>
    <div class="header-divider"></div>

    <!-- Main Site Nav-->
    <div class="site-nav-links mono">
        <a class="btn shadow" href="/">METAR</a>
        <a class="btn shadow" href="/graphic-area-forecast">GFA</a>
        <a class="btn shadow" href="/notam">NOTAM</a>
        <a class="btn shadow" href="/winds">UPR WND</a>
        <a class="btn shadow current-page" href="/trip">TRIP</a>
    </div>

    <br>
    <div class="site-nav-divider"></div>
    <br>

    <!-- Clock -->

    <div>
        <table role="presentation" style="text-align: left;" class="time">
            <tr>
                <td>Current Time:</td>
                <td id="gmtTime" class="text-grey"></td>
                <td>&emsp;</td>
                <td id="zuluTime" class="text-grey"></td>
            </tr>
            <tr style="">
                <td style="">Last Update:</td>
                <td class="text-grey">
                    {{ .LastUpdate.Format "15:04:05 GMT" }}
                </td>
            </tr>
        </table>
    </div>

    <br>
    <div class="site-nav-divider"></div>
    <br>

    <!-- Page Nav-->
    <div class="subnav-links mono">
        {{ range .options.NoTamOptions }}
        <a class="btn shadow" id="{{- . -}}-selection-opt">{{ .}}</a>
        {{ end }}
    </div>
    <a class="jump-to-top" href="#top">
        <div>TOP</div>
    </a>
    <br>
    <div class="mono">
        <a id="submission-redirect-button" class="btn shadow green" href="/trip">SUBMIT</a>
        <button id="submission-reset-button" class="btn shadow red">RESET</button>
        <button id="submission-select-all-button" class="btn shadow">SELECT ALL</button>
    </div>
</section>

<section class="main">
    <br>
    {{ range .airportInfo }}
    <div id="{{.AirportCode}}-section" class="airportInfo">

        <h3 id="{{- .AirportCode -}}" class="mono">{{- .AirportCode }}
            <i class="text-smaller">{{ if .AirportName }} ( {{- .AirportName -}} ){{ end }}</i>
            {{ if .MetarSource }}
            <a href="{{.MetarSource}}"
               class="source-link text-smaller mono"
               style="float:right; font-weight: lighter"
               target="_blank"
               referrerpolicy="no-referrer">src</a>
            {{ end }}
        </h3>
        {{ if .Error }} <h4 class="error">{{ .Error }}</h4> {{ end }}
        <blockquote>
            {{ range .WeatherInfo.Metar }}
            <div class="weatherInfo">{{ . }}</div>
            {{ end }}
            {{ range .WeatherInfo.Taf }}
            <div class="weatherInfo">{{ formatTaf . }}</div>
            {{ end }}

            {{ $picBaseUrl := .CamBaseUrl }}
            {{ $airportCode := .AirportCode}}
            {{ $hasNoCam := (eq (len .CamPicUrls) 0 ) }}

            {{ if (eq $hasNoCam false) }}
            <div class="camera-container">
                {{ range .CamPicUrls }}
                <img class="image shadow" src="{{ $picBaseUrl }}{{- . -}}"
                     alt="FAILED TO LOAD: {{ $airportCode }} IMAGE" width="1920" height="1080"
                     referrerpolicy="no-referrer">
                {{ end }}
            </div>
            {{ end }}
        </blockquote>
    </div>
    {{ if (eq $hasNoCam true) }}
    <div id="{{.AirportCode}}-divider" class="divider"></div>
    {{ else }}
    <div id="{{.AirportCode}}-divider" class="spacing-div"></div>
    {{ end }}
    {{ end }}
</section>


<footer id="footer" class="footer">
    <div class="header-divider"></div>
    <div class="header-container">
        <div class="mono "><a class="source-link" href="/info">INFO</a></div>
        <div class="mono" title="not actually lol" style="cursor: pointer">Â©2023-2024 Scuffed METAR</div>
    </div>
</footer>
</body>
</html>
